var __defProp=Object.defineProperty,__hasOwnProp=Object.prototype.hasOwnProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__assign=(e,t)=>{for(var n in t||(t={}))__hasOwnProp.call(t,n)&&__defNormalProp(e,n,t[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(t))__propIsEnum.call(t,n)&&__defNormalProp(e,n,t[n]);return e};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mini-notifier")):"function"==typeof define&&define.amd?define(["exports","mini-notifier"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pentatrionLib={},e.miniNotifier)}(this,(function(e,t){"use strict";function n(e,t){let n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=t,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(n)}var o=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",downloadFromBlob:n,downloadFromUrl:async function(e,t){return fetch(e).then((e=>e.blob())).then((e=>(n(e,t),URL.createObjectURL(e))))},stringToSlug:function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",n=0,o=t.length;n<o;n++)e=e.replace(new RegExp(t.charAt(n),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(n));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}});function i(e){return e<10?"0"+e:e}var r=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toIsoString:function(e,t=!1){let n=e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate());return t?n+"T"+i(e.getUTCHours())+"-"+i(e.getUTCMinutes()):n},ago:function(e,t){if(!e)return"";t||(t=new Date);let n,o,i=new Date(e),r=Math.floor((t-i)/1e3),a=[Math.floor(r/31536e3),Math.floor(r/2592e3),Math.floor(r/604800),Math.floor(r/86400),Math.floor(r/3600),Math.floor(r/60)],s=["an","mois","semaine","jour","heure","minute"];for(n in a){if(a[n]>1)return o=a[n]+" "+("mois"===s[n]?"mois":s[n]+"s "),"il y a "+o;if(1===a[n])return o=a[n]+" "+s[n]+" ","il y a "+o}return"il y a quelques secondes"}});function a(e,t={},n=!1){var o;t.body instanceof FormData&&(t.body=(o=t.body,Object.fromEntries(o))),"object"==typeof t.body&&(t.body=JSON.stringify(t.body));let i=new Headers({"Content-Type":"application/json",Accept:"application/json"});return n&&i.append("X-Requested-With","XMLHttpRequest"),l(e,t=__assign({headers:i,method:"POST"},t))}function s(e,t={},n=!1){"object"==typeof t.body&&(t.body=function(e){const t=new FormData;for(let n in e)t.append(n,e[n]);return t}(t.body));let o=new Headers({Accept:"application/json"});return n&&o.append("X-Requested-With","XMLHttpRequest"),l(e,t=__assign({headers:o,method:"POST"},t))}async function l(e,t={}){let n,o;try{if(n=await fetch(e,t),204===n.status)return null}catch(i){throw new c("Erreur serveur.",401)}if(n.headers.has("Content-Type")&&"application/json"!==n.headers.get("Content-Type")){if(!n.ok)throw new c("Erreur serveur.",500);return n}try{o=await n.json()}catch(i){throw new c("Le contenu renvoyé est illisible.",500)}if(!n.ok){let e=o.err||o.title||o.detail||"Erreur serveur";throw new c(e,n.status)}return o}class c{constructor(e,t=500){this.title=e,this.status=t}}var d=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",jsonFetchOrNotify:async function(e,n={},o=!1){try{return await a(e,n,o)}catch(i){throw i instanceof c?t.notify(i.title,{style:"error",time:5e5}):t.notify(i,{style:"error",time:5e5}),i}},formFetchOrNotify:async function(e,n={},o=!1){try{return await s(e,n,o)}catch(i){throw i instanceof c?t.notify(i.title,{style:"error",time:5e5}):t.notify(i,{style:"error",time:5e5}),i}},jsonFetch:a,formFetch:s,ApiError:c});var u=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",debounceMethod:function(e,t,n){n=n||100;var o=e.prototype[t],i=t+"Timeout";e.prototype[t]=function(){var e=this[i];clearTimeout(e);var t=arguments,r=this;this[i]=setTimeout((function(){o.apply(r,t),delete r[i]}),n)}},throttleMethod:function(e,t,n){n=n||200;let o,i,r=e.prototype[t];e.prototype[t]=function(){var e=+new Date,t=arguments,a=function(){o=e,r.apply(this,t)}.bind(this);o&&e<o+n?(clearTimeout(i),i=setTimeout(a,n)):a()}}});class f{constructor(e={}){this.animation={},this.options=Object.assign({},f.defaultOptions,e)}beforeAnimation(e){e.dataset.animatorId||(e.dataset.animatorId=Math.floor(999999*Math.random()));let t=e.dataset.animatorId;return!this.animation[t]||(this.animation[t].cb(),delete this.animation[t],!1)}animEnter(e){let t;this.beforeAnimation(e);let n=e.dataset.animatorId;t=e.dataset.transitionName?e.dataset.transitionName:this.options.transitionName,e.classList.add(`${t}-enter`),e.classList.add(`${t}-enter-active`),e.classList.remove(this.options.inactiveClass);let o=()=>{e.classList.remove(`${t}-enter-to`),e.classList.remove(`${t}-enter-active`),e.removeEventListener("transitionend",o),delete this.animation[n],console.log("remove listener transitionend",e),console.log("fin animEnter",n)};setTimeout((()=>{e.addEventListener("transitionend",o),e.classList.remove(`${t}-enter`),e.classList.add(`${t}-enter-to`),console.log("add listener transitionend",e.className),this.animation[n]={action:"enter",cb:o}}),10)}animLeave(e){let t;this.beforeAnimation(e);let n=e.dataset.animatorId;t=e.dataset.transitionName?e.dataset.transitionName:this.options.transitionName,e.classList.add(`${t}-leave`),e.classList.add(`${t}-leave-active`);let o=()=>{e.classList.add(this.options.inactiveClass),e.classList.remove(`${t}-leave-to`),e.classList.remove(`${t}-leave-active`),e.removeEventListener("transitionend",o),delete this.animation[n]};setTimeout((()=>{e.addEventListener("transitionend",o),e.classList.remove(`${t}-leave`),e.classList.add(`${t}-leave-to`),this.animation[n]={action:"leave",cb:o}}),10)}}f.defaultOptions={inactiveClass:"hide",transitionName:"transition"},e.Animator=f,e.EventEmitter=class{on(e,t){if(e&&t){var n=this._events=this._events||{},o=n[e]=n[e]||[];return-1==o.indexOf(t)&&o.push(t),this}}once(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}}off(e,t){var n=this._events&&this._events[e];if(n&&n.length){var o=n.indexOf(t);return-1!=o&&n.splice(o,1),this}}emitEvent(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var o=this._onceEvents&&this._onceEvents[e],i=0;i<n.length;i++){var r=n[i];o&&o[r]&&(this.off(e,r),delete o[r]),r.apply(this,t)}return this}}allOff(){delete this._events,delete this._onceEvents}},e.apiHelper=d,e.dateHelper=r,e.downloadHelper=o,e.emitEvent=function(e,t={},n=document){if(!e)return;let o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});return n.dispatchEvent(o)},e.functionHelper=u,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
