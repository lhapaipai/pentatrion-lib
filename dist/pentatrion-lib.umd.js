var __defProp=Object.defineProperty,__hasOwnProp=Object.prototype.hasOwnProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__assign=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mini-notifier")):"function"==typeof define&&define.amd?define(["exports","mini-notifier"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pentatrionLib={},e.miniNotifier)}(this,(function(e,t){"use strict";function o(e,t){let o=document.createElement("a");o.href=URL.createObjectURL(e),o.download=t,document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(o)}var n=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",downloadFromBlob:o,downloadFromUrl:async function(e,t){return fetch(e).then((e=>e.blob())).then((e=>(o(e,t),URL.createObjectURL(e))))},stringToSlug:function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",o=0,n=t.length;o<n;o++)e=e.replace(new RegExp(t.charAt(o),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(o));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}});function r(e){return e<10?"0"+e:e}var i=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toIsoString:function(e,t=!1){let o=e.getUTCFullYear()+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate());return t?o+"T"+r(e.getUTCHours())+"-"+r(e.getUTCMinutes()):o}});function a(e,t={},o=!1){if(!t.body)throw new c("No content to fetch",500);var n;t.body instanceof FormData&&(t.body=(n=t.body,Object.fromEntries(n))),"object"==typeof t.body&&(t.body=JSON.stringify(t.body));let r=new Headers({"Content-Type":"application/json",Accept:"application/json"});return o&&r.append("X-Requested-With","XMLHttpRequest"),l(e,t=__assign({headers:r,method:"POST"},t))}function s(e,t={},o=!1){if(!t.body)throw new c("No content to fetch",500);"object"==typeof t.body&&(t.body=function(e){const t=new FormData;for(let o in e)t.append(o,e[o]);return t}(t.body));let n=new Headers({Accept:"application/json"});return o&&n.append("X-Requested-With","XMLHttpRequest"),l(e,t=__assign({headers:n,method:"POST"},t))}async function l(e,t={}){let o,n;try{if(o=await fetch(e,t),204===o.status)return null}catch(r){throw new c("Erreur serveur.",401)}if(o.headers.has("Content-Type")&&"application/json"!==o.headers.get("Content-Type")){if(!o.ok)throw new c("Erreur serveur.",500);return o}try{n=await o.json()}catch(r){throw new c("Le contenu renvoyé est illisible.",500)}if(!o.ok){let e=n.err||n.title||n.detail||"Erreur serveur";throw new c(e,o.status)}return n}class c{constructor(e,t=500){this.title=e,this.status=t}}var u=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",jsonFetchOrNotify:async function(e,o={},n=!1){try{return await a(e,o,n)}catch(r){throw r instanceof c?t.notify(r.title,{style:"error",time:5e5}):t.notify(r,{style:"error",time:5e5}),r}},formFetchOrNotify:async function(e,o={},n=!1){try{return await s(e,o,n)}catch(r){throw r instanceof c?t.notify(r.title,{style:"error",time:5e5}):t.notify(r,{style:"error",time:5e5}),r}},jsonFetch:a,formFetch:s,ApiError:c});var f=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",debounceMethod:function(e,t,o){o=o||100;var n=e.prototype[t],r=t+"Timeout";e.prototype[t]=function(){var e=this[r];clearTimeout(e);var t=arguments,i=this;this[r]=setTimeout((function(){n.apply(i,t),delete i[r]}),o)}},throttleMethod:function(e,t,o){o=o||200;let n,r,i=e.prototype[t];e.prototype[t]=function(){var e=+new Date,t=arguments,a=function(){n=e,i.apply(this,t)}.bind(this);n&&e<n+o?(clearTimeout(r),r=setTimeout(a,o)):a()}}});e.EventEmitter=class{on(e,t){if(e&&t){var o=this._events=this._events||{},n=o[e]=o[e]||[];return-1==n.indexOf(t)&&n.push(t),this}}once(e,t){if(e&&t){this.on(e,t);var o=this._onceEvents=this._onceEvents||{};return(o[e]=o[e]||{})[t]=!0,this}}off(e,t){var o=this._events&&this._events[e];if(o&&o.length){var n=o.indexOf(t);return-1!=n&&o.splice(n,1),this}}emitEvent(e,t){var o=this._events&&this._events[e];if(o&&o.length){o=o.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],r=0;r<o.length;r++){var i=o[r];n&&n[i]&&(this.off(e,i),delete n[i]),i.apply(this,t)}return this}}allOff(){delete this._events,delete this._onceEvents}},e.apiHelper=u,e.dateHelper=i,e.downloadHelper=n,e.emitEvent=function(e,t={},o=document){if(!e)return;let n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});return o.dispatchEvent(n)},e.functionHelper=f,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
