var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,r=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,i=(e,i)=>{for(var a in i||(i={}))t.call(i,a)&&r(e,a,i[a]);if(n)for(var a of n(i))o.call(i,a)&&r(e,a,i[a]);return e};import{notify as a}from"mini-notifier";function c(e,t){let n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=t,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(n)}var s=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",downloadFromBlob:c,downloadFromUrl:async function(e,t){return fetch(e).then((e=>e.blob())).then((e=>(c(e,t),URL.createObjectURL(e))))},stringToSlug:function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",n=0,o=t.length;n<o;n++)e=e.replace(new RegExp(t.charAt(n),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(n));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}});function l(e){return e<10?"0"+e:e}var u=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toIsoString:function(e,t=!1){let n=e.getUTCFullYear()+"-"+l(e.getUTCMonth()+1)+"-"+l(e.getUTCDate());return t?n+"T"+l(e.getUTCHours())+"-"+l(e.getUTCMinutes()):n}});function h(e,t={},n=!1){if(!t.body)throw new d("No content to fetch",500);var o;t.body instanceof FormData&&(t.body=(o=t.body,Object.fromEntries(o))),"object"==typeof t.body&&(t.body=JSON.stringify(t.body));let r=new Headers({"Content-Type":"application/json",Accept:"application/json"});return n&&r.append("X-Requested-With","XMLHttpRequest"),p(e,t=i({headers:r,method:"POST"},t))}function f(e,t={},n=!1){if(!t.body)throw new d("No content to fetch",500);"object"==typeof t.body&&(t.body=function(e){const t=new FormData;for(let n in e)t.append(n,e[n]);return t}(t.body));let o=new Headers({Accept:"application/json"});return n&&o.append("X-Requested-With","XMLHttpRequest"),p(e,t=i({headers:o,method:"POST"},t))}async function p(e,t={}){let n,o;try{if(n=await fetch(e,t),204===n.status)return null}catch(r){throw new d("Erreur serveur.",401)}if(n.headers.has("Content-Type")&&"application/json"!==n.headers.get("Content-Type")){if(!n.ok)throw new d("Erreur serveur.",500);return n}try{o=await n.json()}catch(r){throw new d("Le contenu renvoyé est illisible.",500)}if(!n.ok){let e=o.err||o.title||o.detail||"Erreur serveur";throw new d(e,n.status)}return o}class d{constructor(e,t=500){this.title=e,this.status=t}}var y=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",jsonFetchOrNotify:async function(e,t={},n=!1){try{return await h(e,t,n)}catch(o){throw a(o instanceof d?o.title:o,{style:"error",time:5e5}),o}},formFetchOrNotify:async function(e,t={},n=!1){try{return await f(e,t,n)}catch(o){throw a(o instanceof d?o.title:o,{style:"error",time:5e5}),o}},jsonFetch:h,formFetch:f,ApiError:d});var b=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",debounceMethod:function(e,t,n){n=n||100;var o=e.prototype[t],r=t+"Timeout";e.prototype[t]=function(){var e=this[r];clearTimeout(e);var t=arguments,i=this;this[r]=setTimeout((function(){o.apply(i,t),delete i[r]}),n)}},throttleMethod:function(e,t,n){n=n||200;let o,r,i=e.prototype[t];e.prototype[t]=function(){var e=+new Date,t=arguments,a=function(){o=e,i.apply(this,t)}.bind(this);o&&e<o+n?(clearTimeout(r),r=setTimeout(a,n)):a()}}});class v{on(e,t){if(e&&t){var n=this._events=this._events||{},o=n[e]=n[e]||[];return-1==o.indexOf(t)&&o.push(t),this}}once(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}}off(e,t){var n=this._events&&this._events[e];if(n&&n.length){var o=n.indexOf(t);return-1!=o&&n.splice(o,1),this}}emitEvent(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var o=this._onceEvents&&this._onceEvents[e],r=0;r<n.length;r++){var i=n[r];o&&o[i]&&(this.off(e,i),delete o[i]),i.apply(this,t)}return this}}allOff(){delete this._events,delete this._onceEvents}}function w(e,t={},n=document){if(!e)return;let o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});return n.dispatchEvent(o)}export{v as EventEmitter,y as apiHelper,u as dateHelper,s as downloadHelper,w as emitEvent,b as functionHelper};
